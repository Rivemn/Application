<div class="container discover-events-page">
  <header class="page-header">
    <h1>Discover Events</h1>
    <p>Find and join exciting events happening around you</p>
  </header>

  <!-- Поиск -->
  <div class="search-bar">
    <mat-icon class="search-icon">search</mat-icon>

    <app-form-input
      placeholder="Search events by title..."
      [(ngModel)]="searchTerm"
      (ngModelChange)="onSearchChange()"
    >
    </app-form-input>
  </div>

  <div class="events-grid">
    <!-- Итерируемся по 'events', который теперь является фильтрованным списком -->
    @for (event of events; track event.id) {
    <!-- track event.id -->
    <div class="card event-card">
      <div class="event-card-content">
        <h2>{{ event.title }}</h2>
        <p>{{ event.description }}</p>

        <ul class="event-details">
          <li>
            <mat-icon>calendar_today</mat-icon>
            <span>{{ event.start | date : 'MMM d, y' }}</span>
          </li>
          <li>
            <mat-icon>schedule</mat-icon>
            <span>{{ event.start | date : 'HH:mm' }}</span>
          </li>
          <li>
            <mat-icon>location_on</mat-icon>
            <span>{{ event.location }}</span>
          </li>
          <li>
            <mat-icon>people</mat-icon>

            <span>{{ event.participantsCount }} / {{ event.capacity ?? '∞' }} participants</span>
          </li>
        </ul>
      </div>

      <app-button color="success" label="Join Event" (click)="onJoinEvent(event.id)"> </app-button>
    </div>
    } @empty {

    <p class="empty-state">No events match your search.</p>
    }
  </div>
</div>
